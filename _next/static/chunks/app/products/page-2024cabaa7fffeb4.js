(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{3133:(e,t,r)=>{Promise.resolve().then(r.bind(r,6718))},3854:(e,t,r)=>{"use strict";r.d(t,{K:()=>a});var l=r(5453),s=r(6786);let a=(0,l.v)()((0,s.Zr)((e,t)=>({products:[],currentPage:1,itemsPerPage:6,fetchProducts:async()=>{if(0===t().products.length){console.log("Загружаем продукты с Fake Store API, так как store пуст");let t=await fetch("https://fakestoreapi.com/products");if(!t.ok)throw Error("Failed to fetch products from Fake Store API");e({products:(await t.json()).map(e=>({...e,isLiked:!1}))})}},toggleLike:t=>e(e=>({products:e.products.map(e=>e.id===t?{...e,isLiked:!e.isLiked}:e)})),deleteProduct:t=>e(e=>({products:e.products.filter(e=>e.id!==t)})),addProduct:t=>e(e=>{let r={...t,id:Date.now(),isLiked:!1};return{products:[...e.products,r]}}),editProduct:t=>e(e=>({products:e.products.map(e=>e.id===t.id?{...e,...t}:e)})),setPage:t=>e(()=>({currentPage:t}))}),{name:"product-store",storage:(0,s.KU)(()=>localStorage),partialize:e=>({products:e.products,currentPage:e.currentPage,itemsPerPage:e.itemsPerPage})}))},6718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var l=r(5155),s=r(1976),a=r(4126),c=r(9917),d=r(6766),i=r(6874),o=r.n(i),n=r(3854);let u=e=>{let{product:t}=e,{toggleLike:r,deleteProduct:i}=(0,n.K)();return(0,l.jsxs)("div",{className:"border rounded p-4 h-64 flex flex-col h-full",children:[(0,l.jsxs)(o(),{href:"/products/".concat(t.id),className:"flex-1",children:[(0,l.jsx)(d.default,{src:t.image,alt:t.title,className:"h-32 object-contain",width:128,height:128}),(0,l.jsx)("h3",{className:"text-lg truncate",children:t.title}),(0,l.jsx)("p",{className:"text-sm line-clamp-2",children:t.description}),(0,l.jsxs)("p",{className:"font-bold",children:[t.price,"$"]})]}),(0,l.jsxs)("div",{className:"flex gap-10 mt-2",children:[(0,l.jsx)("button",{onClick:()=>r(t.id),children:(0,l.jsx)(s.A,{className:t.isLiked?"fill-red-500 text-red-500":""})}),(0,l.jsx)("button",{onClick:()=>{confirm("Вы уверены что хотите удалить данный продукт?")&&i(t.id)},children:(0,l.jsx)(a.A,{className:"text-red=100"})}),(0,l.jsx)(o(),{href:"/edit-product/".concat(t.id),children:(0,l.jsx)(c.A,{className:"text-grey-500"})})]})]})},p=e=>{let{products:t}=e;return(0,l.jsx)("div",{className:"grid grid-cols-3 gap-4",children:t.map(e=>(0,l.jsx)(u,{product:e},e.id))})};var h=r(4338),m=r(3337),x=r(2115);function g(){let{products:e,fetchProducts:t,currentPage:r,itemsPerPage:s,setPage:a}=(0,n.K)(),[c,d]=(0,x.useState)("all"),[i,o]=(0,x.useState)(!1),[u,g]=(0,x.useState)(""),[f,j]=(0,x.useState)(""),[b,v]=(0,x.useState)("all"),[N,k]=(0,x.useState)("");if((0,x.useEffect)(()=>{o(!0),0===e.length&&t()},[t,e.length]),(0,x.useEffect)(()=>{a(1)},[c,u,f,b,N,a]),!i)return(0,l.jsx)("div",{children:"Загрузка..."});let P=["all",...new Set(e.map(e=>e.category).filter(e=>null!=e))],w=e;if("liked"===c&&(w=w.filter(e=>e.isLiked)),""!==u&&(w=w.filter(e=>e.price>=u)),""!==f&&(w=w.filter(e=>e.price<=f)),"all"!==b&&(w=w.filter(e=>e.category===b)),N){let e=N.toLowerCase();w=w.filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}let C=Math.ceil(w.length/s),y=(r-1)*s,L=w.slice(y,y+s);return(0,l.jsxs)("div",{className:"container mx-auto p-4",children:[(0,l.jsxs)("div",{className:"mb-4 flex flex-col sm:flex-row gap-4",children:[(0,l.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"p-2 border border-solid border-black rounded",children:[(0,l.jsx)("option",{value:"all",children:"Все продукты"}),(0,l.jsx)("option",{value:"liked",children:"Избранное"})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"number",placeholder:"Мин. цена",value:u,onChange:e=>g(e.target.value?Number(e.target.value):""),className:"p-2 border border-solid border-black rounded w-32"}),(0,l.jsx)("input",{type:"number",placeholder:"Макс. цена",value:f,onChange:e=>j(e.target.value?Number(e.target.value):""),className:"p-2 border border-solid border-black rounded w-32"})]}),(0,l.jsx)("select",{value:b,onChange:e=>v(e.target.value),className:"p-2 border border-solid border-black rounded",children:P.map((e,t)=>(0,l.jsx)("option",{value:e,children:"all"===e?"Все категории":e},"".concat(e,"-").concat(t)))}),(0,l.jsx)("input",{type:"text",placeholder:"Поиск по названию или описанию...",value:N,onChange:e=>k(e.target.value),className:"p-2 border border-solid border-black rounded w-full sm:w-64"})]}),0===w.length?(0,l.jsx)("p",{className:"text-center text-gray-500",children:"Нет продуктов, соответствующих фильтру"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{products:L}),w.length>0&&(0,l.jsx)(m.A,{spacing:2,className:"mt-4 flex justify-center items-center p-10",children:(0,l.jsx)(h.A,{count:C,page:r,onChange:(e,t)=>{a(t)},color:"primary"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,766,793,441,684,358],()=>t(3133)),_N_E=e.O()}]);